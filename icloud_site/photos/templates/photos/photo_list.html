{% extends 'photos/base.html' %}
{% block content %}
    <h2>Fotoğraflarınız</h2>
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    {% if photos %}
        <form method="post" action="{% url 'delete_photos' %}">
            {% csrf_token %}
            <table>
                <tr>
                    <th>Seç</th>
                    <th>Önizleme</th>
                    <th>Dosya Adı</th>
                    <th>İşlemler</th>
                </tr>
                {% for photo in photos %}
                    <tr>
                        <td><input type="checkbox" name="photo_ids" value="{{ photo.id }}"></td>
                        <td><img src="{{ photo.image.url }}" alt="{{ photo.image.name }}" style="max-width: 100px; max-height: 100px;"></td>
                        <td>{{ photo.image.name }}</td>
                        <td>
                            <a href="{% url 'download_photo' photo.id %}" class="btn btn-primary">İndir</a>
                        </td>
                    </tr>
                {% endfor %}
            </table>
            <button type="submit" class="btn btn-danger">Seçilenleri Sil</button>
            <a href="{% url 'delete_all_photos' %}" class="btn btn-danger">Tüm Fotoğrafları Sil</a>
            <a href="{% url 'delete_account' %}" class="btn btn-danger">Hesabı Sil</a>
        </form>
    {% else %}
        <p>Henüz fotoğraf yüklemediniz.</p>
    {% endif %}
    <a href="{% url 'icloud_login' %}" class="btn btn-primary">iCloud'dan Fotoğraf Yükle</a>
    <a href="{% url 'upload_photo' %}" class="btn btn-primary">Fotoğraf Yükle</a>
{% endblock %}